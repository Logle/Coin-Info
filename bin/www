#!/usr/bin/env node

var debug = require('debug')('CoinInfo');
var app = require('../app');
var data_service = require('../data_service/start');
var change = require('../data_service/changeDatabase');
var CronJob = require('cron').CronJob;

app.set('port', process.env.PORT || 3000);

var server = app.listen(app.get('port'), function() {
  debug('Express server listening on port ' + server.address().port);
});

 // Scraping data, update data - all data services

var collectNewData = new CronJob({
	cronTime: '00 15 22 * * *',  // everyday at 10.15 P.M
	onTick: function(){
		console.log('start New Data service');
		data_service.init(1,2);
	},
	start: true,
	timeZone: "America/New_York"  // timezones allowed http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
});

var updateNewData = new CronJob({
	cronTime: '00 00 2,14 * * *',  // everyday at 2A.M and 2P.M
	onTick: function(){
		console.log('start Data Popular service');
		data_service.updatePopular(125);
	},
	start: true,
	timeZone: "America/New_York"  // timezones allowed http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
});

var updateNewData2 = new CronJob({
	cronTime: '00 10 2,14 * * *',
	onTick: function(){
		console.log('start Data PostRank service');
		data_service.updatePostRank(50);
	},
	start: true,
	timeZone: "America/New_York"  // timezones allowed http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
});


















